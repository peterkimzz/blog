import { Server, RequestListener } from 'node:http';
import { Server as Server$1 } from 'node:https';
import { GetPortInput } from 'get-port-please';
import { ConsolaInstance } from 'consola';
import * as h3 from 'h3';

interface Certificate {
    key: string;
    cert: string;
    passphrase?: string;
}
interface HTTPSOptions {
    cert?: string;
    key?: string;
    pfx?: string;
    passphrase?: string;
    validityDays?: number;
    domains?: string[];
}
interface ListenOptions {
    name: string;
    port?: GetPortInput;
    hostname: string;
    showURL: boolean;
    baseURL: string;
    open: boolean;
    https: boolean | HTTPSOptions;
    clipboard: boolean;
    isTest: boolean;
    isProd: boolean;
    autoClose: boolean;
    autoCloseSignals: string[];
}
interface ShowURLOptions {
    baseURL: string;
    name?: string;
}
interface Listener {
    url: string;
    address: any;
    server: Server | Server$1;
    https: false | Certificate;
    close: () => Promise<void>;
    open: () => Promise<void>;
    showURL: (options?: Pick<ListenOptions, "baseURL">) => void;
}

declare function listen(handle: RequestListener, options_?: Partial<ListenOptions>): Promise<Listener>;

interface DevServerOptions {
    cwd?: string;
    staticDirs?: string[];
    logger?: ConsolaInstance;
}
declare function createDevServer(entry: string, options: DevServerOptions): Promise<{
    cwd: string;
    resolver: {
        relative: (path: string) => string;
        formateRelative: (path: string) => string;
        import: (id: string) => Promise<any>;
        resolve: (id: string) => string;
        tryResolve: (id: string) => string | undefined;
    };
    nodeListener: h3.NodeListener;
    reload: (_initial?: boolean) => Promise<void>;
}>;

interface WatchOptions extends DevServerOptions {
    cwd?: string;
    logger?: ConsolaInstance;
    ignore?: string[];
    publicDirs?: string[];
}
declare function listenAndWatch(entry: string, options: Partial<ListenOptions & WatchOptions>): Promise<Listener>;

export { Certificate, DevServerOptions, HTTPSOptions, ListenOptions, Listener, ShowURLOptions, WatchOptions, createDevServer, listen, listenAndWatch };
