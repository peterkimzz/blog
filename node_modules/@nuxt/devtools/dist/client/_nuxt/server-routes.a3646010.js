import{r as O,b8 as Fe,as as He,aq as ze,w as ye,b9 as We,ba as Je,bb as Ge,d as ae,bc as ge,o,m as p,k as c,E,h as C,f as e,bd as le,t as j,p as D,v as F,a3 as Ke,a5 as ee,F as V,n as A,a0 as ce,a4 as Qe,a as R,i as f,j as k,U as _e,C as be,J as ke,be as Xe,bf as Ye,bg as Ze,a7 as et,ao as ue,a6 as tt,ar as ot,a9 as Ce,l as te,H as de,aI as nt,_ as xe,A as we,bh as st,bi as lt,ab as at,R as rt,bj as it,ai as ut}from"./entry.704683a1.js";import{_ as dt}from"./Navbar.vue.c8f5ea35.js";import{_ as $e}from"./Badge.809c442f.js";import{_ as Se}from"./NSelect.vue.6e592a84.js";import{_ as ct}from"./NCheckbox.vue.76b79ec0.js";import{_ as pt}from"./CodeSnippets.vue.e2cc365d.js";import{_ as ft}from"./DataSchemaButton.vue.31fe918d.js";import{_ as mt}from"./NCodeBlock.vue.a8601f10.js";import{C as ve,S as Te}from"./constants.4e5eba24.js";import{U as vt}from"./json-editor-vue.d2d6ca22.js";import{_ as ht}from"./NSectionBlock.6778ba18.js";import{_ as yt}from"./DrawerRight.vue.3bbd0e76.js";import"./client.fbe3eaa6.js";import"./NIconTitle.vue.e492e44a.js";const se=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function gt(l,h){if(typeof l!="string")throw new TypeError("argument str must be a string");const m={},w=(h||{}).decode||kt;let _=0;for(;_<l.length;){const t=l.indexOf("=",_);if(t===-1)break;let y=l.indexOf(";",_);if(y===-1)y=l.length;else if(y<t){_=l.lastIndexOf(";",t-1)+1;continue}const r=l.slice(_,t).trim();if(m[r]===void 0){let a=l.slice(t+1,y).trim();a.codePointAt(0)===34&&(a=a.slice(1,-1)),m[r]=bt(a,w)}_=y+1}return m}function he(l,h,m){const n=m||{},w=n.encode||Ct;if(typeof w!="function")throw new TypeError("option encode is invalid");if(!se.test(l))throw new TypeError("argument name is invalid");const _=w(h);if(_&&!se.test(_))throw new TypeError("argument val is invalid");let t=l+"="+_;if(n.maxAge!==void 0&&n.maxAge!==null){const y=n.maxAge-0;if(Number.isNaN(y)||!Number.isFinite(y))throw new TypeError("option maxAge is invalid");t+="; Max-Age="+Math.floor(y)}if(n.domain){if(!se.test(n.domain))throw new TypeError("option domain is invalid");t+="; Domain="+n.domain}if(n.path){if(!se.test(n.path))throw new TypeError("option path is invalid");t+="; Path="+n.path}if(n.expires){if(!_t(n.expires)||Number.isNaN(n.expires.valueOf()))throw new TypeError("option expires is invalid");t+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(t+="; HttpOnly"),n.secure&&(t+="; Secure"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():n.priority){case"low":t+="; Priority=Low";break;case"medium":t+="; Priority=Medium";break;case"high":t+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:t+="; SameSite=Strict";break;case"lax":t+="; SameSite=Lax";break;case"strict":t+="; SameSite=Strict";break;case"none":t+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return t}function _t(l){return Object.prototype.toString.call(l)==="[object Date]"||l instanceof Date}function bt(l,h){try{return h(l)}catch{return l}}function kt(l){return l.includes("%")?decodeURIComponent(l):l}function Ct(l){return encodeURIComponent(l)}const xt={path:"/",watch:!0,decode:l=>Je(decodeURIComponent(l)),encode:l=>encodeURIComponent(typeof l=="string"?l:JSON.stringify(l))};function wt(l,h){const m={...xt,...h},n=$t(m)||{},w=O(n[l]??m.default?.());{const _=typeof BroadcastChannel>"u"?null:new BroadcastChannel(`nuxt:cookies:${l}`);Fe()&&He(()=>{_?.close()});const t=()=>{Tt(l,w.value,m),_?.postMessage(Ge(w.value))};let y=!1;_&&(_.onmessage=r=>{y=!0,w.value=r.data,ze(()=>{y=!1})}),m.watch?ye(w,(r,a)=>{y||We(r,a)||t()},{deep:m.watch!=="shallow"}):t()}return w}function $t(l={}){return gt(document.cookie,l)}function St(l,h,m={}){return h==null?he(l,h,{...m,maxAge:-1}):he(l,h,m)}function Tt(l,h,m={}){document.cookie=St(l,h,m)}const Rt=c("div",{"x-divider":""},null,-1),Re=ae({__name:"ServerRouteListItem",props:{item:{},index:{default:0}},setup(l){const h=O(!0),m=ge();return(n,w)=>{const _=ce,t=$e,y=Re;return o(),p("div",null,[c("button",{flex:"~ gap-2","w-full":"","items-start":"","items-center":"","hover-bg-active":"",px2:"",py1:"",class:E([{"bg-active":e(m)===n.item.filepath}]),style:Ke({paddingLeft:`calc(0.5rem + ${n.index*1.5}em)`}),onClick:w[0]||(w[0]=r=>{h.value=!e(h),m.value=n.item.filepath})},[c("div",{class:E({"w-12":!n.item.routes}),"flex-none":"","text-left":""},[n.item.type==="collection"?(o(),C(_,{key:0,icon:"carbon:chevron-right","mb0.5":"","transform-rotate":e(h)?90:0,transition:""},null,8,["transform-rotate"])):(o(),C(t,{key:1,class:E(("getRequestMethodClass"in n?n.getRequestMethodClass:e(le))(n.item.method||"*")),textContent:j((n.item.method||"*").toUpperCase())},null,8,["class","textContent"]))],2),c("span",{class:E({"flex items-center":n.item.routes}),"text-sm":"","font-mono":""},[n.item.type==="collection"?(o(),C(_,{key:0,title:`${n.item.routes?.length} routes`,icon:"carbon:folder",mr1:""},null,8,["title"])):D("",!0),F(" "+j(n.item.route),1)],2)],6),Rt,e(h)?ee(n.$slots,"default",{key:0},()=>[(o(!0),p(V,null,A(n.item.routes,r=>(o(),C(y,{key:r.filepath,item:r,index:n.index+1},null,8,["item","index"]))),128))]):D("",!0)])}}}),Vt={p4:"",flex:"~ col gap-4"},Ut={key:1,ml2:"",flex:""},It=["value"],Dt={key:0,flex:"","gap-4":""},Nt=c("div",{"flex-auto":""},null,-1),Ve=ae({__name:"ServerRouteInputs",props:{modelValue:{},keys:{default:()=>[]},default:{default:()=>({})},disabled:{type:Boolean,default:!1}},setup(l,{emit:h}){const m=l,n=Qe(m,"modelValue",h,{passive:!0}),w=R(()=>[...m.keys,"key","value","type"]),_=R(()=>{const r={};for(const a of w.value)r[a]=m.default[a]||"";return r}),t=["string","number","boolean","file","date","time","datetime-local"];function y(r,a){const U=a.target;if(U.files&&U.files[0]){const J=U.files[0],M=new FileReader;M.readAsDataURL(J),M.onload=()=>{n.value[r].value=M.result}}}return ye(()=>n,r=>{r.value.forEach(a=>{if(a.type==="number"&&typeof a.value!="number"){const U=Number.parseFloat(a.value);a.value=Number.isNaN(U)?0:U}else a.type==="boolean"&&typeof a.value!="boolean"?a.value=!0:a.type==="file"&&typeof a.value!="object"?a.value="":a.type==="date"&&typeof a.value=="string"&&!a.value.match(/^\d{4}-\d{2}-\d{2}$/)?a.value=new Date().toISOString().slice(0,10):a.type==="time"&&typeof a.value=="string"&&!a.value.match(/^\d{2}:\d{2}$/)?a.value=new Date().toISOString().slice(11,16):a.type==="datetime-local"&&typeof a.value=="string"&&!a.value.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}$/)?a.value=new Date().toISOString().slice(0,16):a.type==="string"&&(a.value=a.value.toString())})},{deep:!0,immediate:!0,flush:"sync"}),(r,a)=>{const U=_e,J=ct,M=Se,z=ce,v=be;return o(),p("div",Vt,[(o(!0),p(V,null,A(e(n),(d,x)=>(o(),p("div",{key:x,flex:"~ gap-2","justify-around":""},[ee(r.$slots,"input",{item:d}),(o(!0),p(V,null,A(e(w),$=>(o(),p(V,{key:$},[d.type!==null&&$==="key"?(o(),C(U,{key:0,modelValue:d[$],"onUpdate:modelValue":g=>d[$]=g,placeholder:$,"flex-1":"","font-mono":"",n:"sm primary",disabled:r.disabled,class:E(r.disabled?"op50":"")},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled","class"])):$==="value"?(o(),p(V,{key:1},[d.type==="file"?(o(),C(U,{key:0,type:"file",disabled:r.disabled,class:E(r.disabled?"op75":""),onChange:g=>y(x,g)},null,8,["disabled","class","onChange"])):d.type==="boolean"?(o(),p("div",Ut,[f(J,{modelValue:d.value,"onUpdate:modelValue":g=>d.value=g,placeholder:"Value",n:"green lg",disabled:r.disabled},null,8,["modelValue","onUpdate:modelValue","disabled"])])):(o(),C(U,{key:2,modelValue:d.value,"onUpdate:modelValue":g=>d.value=g,type:d.type,placeholder:"Value","flex-1":"","font-mono":"",n:"sm primary",disabled:r.disabled,class:E(r.disabled?"op75":"")},null,8,["modelValue","onUpdate:modelValue","type","disabled","class"]))],64)):$==="type"?(o(),C(M,{key:2,modelValue:d.type,"onUpdate:modelValue":g=>d.type=g,n:"sm green",class:E(r.disabled?"op75":""),disabled:r.disabled},{default:k(()=>[(o(),p(V,null,A(t,g=>c("option",{key:g,value:g},j(g),9,It)),64))]),_:2},1032,["modelValue","onUpdate:modelValue","class","disabled"])):D("",!0)],64))),128)),ee(r.$slots,"input-actions",{},()=>[f(v,{n:"red",disabled:r.disabled,class:E(r.disabled?"op0!":""),onClick:$=>e(n).splice(x,1)},{default:k(()=>[f(z,{icon:"carbon:delete"})]),_:2},1032,["disabled","class","onClick"])])]))),128)),r.disabled?D("",!0):(o(),p("div",Dt,[ee(r.$slots,"actions",{params:e(n)},()=>[f(v,{icon:"carbon-add",n:"sm primary",my1:"","px-3":"",onClick:a[0]||(a[0]=d=>e(n).push({...e(_)}))},{default:k(()=>[F(" Add ")]),_:1}),Nt,e(n).length?(o(),C(v,{key:0,icon:"carbon-trash-can",n:"sm red",my1:"","px-3":"",onClick:a[1]||(a[1]=d=>n.value=[])},{default:k(()=>[F(" Remove All ")]),_:1})):D("",!0)])])),ee(r.$slots,"default")])}}}),Ue=O(await ke.getOptions("serverRoutes")),Et=Xe(Ue),jt={serverRoutes:Et};function Ie(l){return jt[l]}Ye(Ue,async l=>{ke.updateOptions("serverRoutes",l)},{deep:!0,flush:"post",debounce:500,maxWait:1e3});const Ot={"h-full":"","w-full":"",flex:"~ col"},Pt={flex:"~ col gap-2","flex-none":"",p4:"","navbar-glass":""},qt={flex:"~ gap2"},Bt={flex:"~ gap2 wrap","w-full":"","items-center":"",px4:"",pb2:"","text-center":"","text-sm":"",border:"b base"},Lt=c("div",{"flex-auto":""},null,-1),At={key:0,border:"b base","items-center":"",px4:"",py2:"",grid:"~ cols-[max-content_1fr] gap-2"},Mt={"text-right":"","font-mono":""},Ft={key:1,border:"b base",p4:"",flex:"~ col gap-4","font-mono":""},Ht={flex:"~ gap-4"},zt={flex:"~ gap2","mb--2":"","items-center":"",op50:""},Wt=c("div",{"w-5":"","x-divider":""},null,-1),Jt=c("div",{"flex-none":""}," Default Inputs ",-1),Gt=c("div",{"x-divider":""},null,-1),Kt={key:2},Qt={key:3,border:"b base",relative:"","n-code-block":""},Xt={flex:"~ wrap","w-full":""},Yt=["onClick"],Zt=c("div",{border:"b base","flex-auto":""},null,-1),eo={border:"b base",flex:"~ gap2","items-center":"",px4:"",py2:""},to=c("div",null,"Response",-1),oo={key:1,"text-xs":"",op50:""},no=c("div",{"flex-auto":""},null,-1),so=c("div",{op50:""}," Request finished in ",-1),lo={key:0,"flex-auto":"","overflow-auto":""},ao={border:"~ base","h-full":"","w-full":"",rounded:""},ro=["data"],io={key:2,"flex-auto":"","overflow-auto":"",p4:""},uo={border:"~ base",rounded:""},co=["src"],po={key:1,controls:"",rounded:""},fo=["src"],mo=ae({__name:"ServerRouteDetails",props:{route:{}},emits:["open-default-input"],setup(l,{emit:h}){const m=l,[n,w]=Ze(),_=et(),t=ue({contentType:"text/plain",data:"",statusCode:200,error:void 0,fetchTime:0}),y=R(()=>t.contentType.includes("application/json")?"json":t.contentType.includes("text/html")?"html":t.contentType.includes("text/css")?"css":t.contentType.includes("text/javascript")?"javascript":t.contentType.includes("image")||t.contentType.includes("video")?"media":t.contentType.includes("text/xml")||t.contentType.includes("application/xml")?"xml":t.contentType.includes("application/pdf")?"pdf":"text"),r=R(()=>{if(y.value==="json")return JSON.stringify(t.data,null,2);if(y.value==="media"||y.value==="pdf"){const s=new Blob([t.data],{type:t.contentType});return URL.createObjectURL(s)}return t.data}),a=O(!1),U=O(!1),J=tt(),M=R(()=>m.route.route?.split(/((?:\*\*)?:[\w_]+)/g)),z=R(()=>M.value?.filter(s=>s.startsWith(":")||s.startsWith("**:"))||[]),v=O(m.route.method||"GET"),d=O({}),x=ue({query:[{key:"",value:"",type:"string"}],body:[{key:"",value:"",type:"string"}],headers:[{key:"Content-Type",value:"application/json",type:"string"}]}),$=O({}),{inputDefaults:g}=Ie("serverRoutes"),P=["GET","POST","PUT","PATCH","DELETE","HEAD"],q=["PATCH","POST","PUT","DELETE"],B=R(()=>q.includes(v.value.toUpperCase())),S=O(z.value.length?"params":"query"),oe=["input","json"],H=O(oe[0]),K=R({get:()=>x[S.value],set:s=>{x[S.value]=s}}),X=R(()=>({...G(g.value.query),...G(x.query)})),T=R(()=>({...G(g.value.headers),...G(x.headers)})),Y=R(()=>B.value?H.value==="json"?{...G(g.value.body),...$.value}:{...G(g.value.body),...G(x.body)}:void 0),De=R(()=>{let s=_.value?.devServer.url||"http://localhost";s.charAt(s.length-1)==="/"&&(s=s.slice(0,-1));const u=_.value?.devServer.port||3e3;return s.includes(`:${u}`)?s:`${s}:${u}`}),ne=R(()=>{let s=new URLSearchParams(X.value).toString();s&&(s=`?${s}`);const u=(M.value?.map(N=>(N.startsWith(":")||N.startsWith("**:"))&&d.value[N]||N).join("")||"")+s;let b=_.value?.app.baseURL||"";return(b==="./"||b===".")&&(b=""),b.endsWith("/")&&(b=b.slice(0,-1)),b+u}),Ne=R(()=>De.value+ne.value);function G(s){const u=Object.fromEntries(s.filter(({key:b,value:N})=>b&&N!==void 0).map(({key:b,value:N})=>[b,N]));return Object.entries(u).length?u:void 0}async function pe(){U.value=!0,a.value=!0;const s=Date.now();try{t.data=await $fetch(Ne.value,{method:v.value.toUpperCase(),headers:T.value,query:X.value,body:Y.value,onResponse({response:u}){t.contentType=(u.headers.get("content-type")||"").toString().toLowerCase().trim(),t.statusCode=u.status,t.error=void 0},onResponseError(u){t.error=u.response._data,t.data=u.response._data}})}catch{}a.value=!1,t.fetchTime=Date.now()-s}const fe=R(()=>{const s=[],u=[],b=Object.entries(T.value).filter(([I,L])=>I&&L&&!(I==="Content-Type"&&L==="application/json")).map(([I,L])=>`  '${I}': '${L}'`).join(`,
`);v.value.toUpperCase()!=="GET"&&u.push(`method: '${v.value.toUpperCase()}'`),b&&u.push(`headers: {
${b}
}`),Y.value&&u.push(`body: ${JSON.stringify(Y.value,null,2)}`);const N=u.length?`, {
${u.join(`,
`).split(`
`).map(I=>`  ${I}`).join(`
`)}
}`:"";return s.push({name:"useFetch",lang:"javascript",docs:ve.nuxt.useFetch,code:`const { data, pending, error, refresh } = useFetch('${ne.value}'${N})`}),s.push({name:"$fetch",lang:"javascript",docs:ve.nuxt.$fetch,code:`await $fetch('${ne.value}'${N})`}),s}),Ee=R(()=>{const s=[];return z.value.length&&s.push({name:"Params",slug:"params",length:z.value.length}),s.push({name:"Query",slug:"query",length:x.query.length}),B.value&&s.push({name:"Body",slug:"body",length:x.body.length}),s.push({name:"Headers",slug:"headers",length:x.headers.length}),s.push({name:"Cookies",slug:"cookies"}),s.push({name:"Snippets",slug:"snippet"}),s}),Z=O(je());function je(){return document.cookie.split("; ").map(s=>{const[u,b]=s.split("=");return{key:u,value:b}})}const W=ue({key:"",value:""});function re(s,u){if(!s)return;const b=Z.value.find(I=>I.key===s),N=wt(s);b!==void 0?u===void 0&&(Z.value=Z.value.filter(I=>I.key!==s)):(Z.value.push({key:s,value:u}),W.key="",W.value=""),N.value=u}return ot(()=>{H.value==="json"&&typeof $.value=="string"&&($.value=JSON.parse($.value))}),(s,u)=>{const b=be,N=Se,I=_e,L=ce,Oe=xe,me=Ve,Pe=pt,qe=we,Be=st,ie=$e,Le=ft,Ae=mt,Me=Ce("tooltip");return o(),p("div",Ot,[c("div",Pt,[c("div",qt,[s.route.method?(o(),C(b,{key:0,class:E(("getRequestMethodClass"in s?s.getRequestMethodClass:e(le))(e(v))),"pointer-events-none":"",tabindex:"-1"},{default:k(()=>[F(j(e(v).toUpperCase()),1)]),_:1},8,["class"])):(o(),C(N,{key:1,modelValue:e(v),"onUpdate:modelValue":u[0]||(u[0]=i=>te(v)?v.value=i:null),class:E(("getRequestMethodClass"in s?s.getRequestMethodClass:e(le))(e(v)))},{default:k(()=>[(o(),p(V,null,A(P,i=>c("option",{key:i,class:E(("getRequestMethodClass"in s?s.getRequestMethodClass:e(le))(i))},j(i.toUpperCase()),3)),64))]),_:1},8,["modelValue","class"])),f(I,{"model-value":e(ne),disabled:"","flex-auto":"","font-mono":"",p:"x5 y2",n:"primary xs"},null,8,["model-value"]),f(b,{n:"primary solid",onClick:pe},{default:k(()=>[f(L,{icon:"carbon:send"})]),_:1})])]),c("div",Bt,[(o(!0),p(V,null,A(e(Ee),i=>(o(),C(b,{key:i.slug,class:E(e(S)===i.slug?"text-primary n-primary":"border-transparent shadow-none"),onClick:Q=>S.value=i.slug},{default:k(()=>[f(L,{icon:("ServerRouteTabIcons"in s?s.ServerRouteTabIcons:e(Te))[i.slug]},null,8,["icon"]),F(" "+j(i.name)+" "+j(i?.length?`(${i.length})`:"")+" ",1),c("span",null,j(e(g)[i.slug]?.length?`(${e(g)[i.slug].length})`:""),1)]),_:2},1032,["class","onClick"]))),128)),Lt,de((o(),C(b,{title:"Open in Editor",onClick:u[1]||(u[1]=i=>e(J)(s.route.filepath))},{default:k(()=>[f(L,{icon:"carbon-launch"})]),_:1})),[[Me,"Open in Editor"]])]),e(S)==="params"?(o(),p("div",At,[(o(!0),p(V,null,A(e(z),i=>(o(),p(V,{key:i},[c("div",Mt,j(i),1),f(I,{modelValue:e(d)[i],"onUpdate:modelValue":Q=>e(d)[i]=Q,placeholder:i,"flex-1":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])],64))),128))])):D("",!0),e(S)==="cookies"?(o(),p("div",Ft,[(o(!0),p(V,null,A(e(Z),i=>(o(),p("div",{key:i.key,flex:"~ gap-4 items-center"},[f(I,{placeholder:"Key...","model-value":i.key,disabled:"","op-70":""},null,8,["model-value"]),f(I,{placeholder:"Value...","model-value":i.value,"flex-1":"",n:"primary",onInput:Q=>re(i.key,Q.target?.value)},null,8,["model-value","onInput"]),f(b,{title:"Delete",n:"red",onClick:Q=>re(i.key,void 0)},{default:k(()=>[f(L,{icon:"i-carbon-delete"})]),_:2},1032,["onClick"])]))),128)),c("div",Ht,[f(I,{modelValue:e(W).key,"onUpdate:modelValue":u[2]||(u[2]=i=>e(W).key=i),placeholder:"Key",n:"primary","flex-1":""},null,8,["modelValue"]),f(I,{modelValue:e(W).value,"onUpdate:modelValue":u[3]||(u[3]=i=>e(W).value=i),placeholder:"Value",n:"primary","flex-1":""},null,8,["modelValue"]),f(b,{title:"Add",n:"primary",onClick:u[4]||(u[4]=i=>re(e(W).key,e(W).value))},{default:k(()=>[f(L,{icon:"i-carbon-save"})]),_:1})])])):D("",!0),f(e(n),null,{default:k(()=>[f(me,{modelValue:e(K),"onUpdate:modelValue":u[7]||(u[7]=i=>te(K)?K.value=i:null),default:{type:"string"},"max-h-xs":"","of-auto":""},{default:k(()=>[e(g)[e(S)]?.length?(o(),p(V,{key:0},[c("div",zt,[Wt,Jt,f(Oe,{icon:"i-carbon-edit",onClick:u[5]||(u[5]=i=>h("open-default-input"))}),Gt]),f(me,{modelValue:e(g)[e(S)],"onUpdate:modelValue":u[6]||(u[6]=i=>e(g)[e(S)]=i),disabled:"",p0:""},null,8,["modelValue"])],64)):D("",!0)]),_:1},8,["modelValue"])]),_:1}),e(S)==="snippet"?(o(),p("div",Kt,[e(fe).length?(o(),C(Pe,{key:0,"code-snippets":e(fe)},null,8,["code-snippets"])):D("",!0)])):e(K)?(o(),p("div",Qt,[e(S)==="body"?(o(),p(V,{key:0},[c("div",Xt,[(o(),p(V,null,A(oe,i=>c("button",{key:i,px4:"",py2:"",border:"r base",hover:"bg-active",class:E({"border-b":i!==e(H)}),onClick:Q=>H.value=i},[c("div",{class:E({op30:i!==e(H)}),"font-mono":""},j(i),3)],10,Yt)),64)),Zt]),e(H)==="input"?(o(),C(e(w),{key:0})):e(H)==="json"?(o(),C(e(vt),nt({key:1,modelValue:e($),"onUpdate:modelValue":u[8]||(u[8]=i=>te($)?$.value=i:null),class:[[s.$colorMode.value==="dark"?"jse-theme-dark":"light"],"json-editor-vue of-auto text-sm outline-none"]},s.$attrs,{mode:"text","navigation-bar":!1,indentation:2,"tab-size":2}),null,16,["modelValue","class"])):D("",!0)],64)):(o(),C(e(w),{key:1}))])):D("",!0),e(U)?e(a)?(o(),C(Be,{key:5,"z-10":"","flex-auto":"","backdrop-blur":""},{default:k(()=>[F(" Fetching... ")]),_:1})):(o(),p(V,{key:6},[c("div",eo,[to,e(t).error?(o(),C(ie,{key:0,"bg-red-400:10":"","text-red-400":""},{default:k(()=>[F(" Error ")]),_:1})):D("",!0),f(ie,{class:E({"bg-orange-400:10 text-orange-400":e(t).error,"bg-green-400:10 text-green-400":!e(t).error})},{default:k(()=>[F(j(e(t).statusCode),1)]),_:1},8,["class"]),e(t).contentType?(o(),p("code",oo,j(e(t).contentType),1)):D("",!0),e(t).contentType==="application/json"?(o(),C(Le,{key:2,getter:()=>({input:e(r)})},null,8,["getter"])):D("",!0),no,so,f(ie,{"bg-green-400:10":"","text-green-400":""},{default:k(()=>[F(j(e(t).fetchTime)+" ms ",1)]),_:1})]),e(y)==="pdf"?(o(),p("div",lo,[c("div",ao,[c("object",{data:e(r),type:"application/pdf","flex-auto":"",width:"100%",height:"100%",rounded:""},null,8,ro)])])):e(y)!=="media"?(o(),C(Ae,{key:1,"flex-auto":"","overflow-auto":"","py-2":"",code:e(r),lang:e(y)},null,8,["code","lang"])):(o(),p("div",io,[c("div",uo,[e(t).contentType.includes("image")?(o(),p("img",{key:0,rounded:"",src:e(r)},null,8,co)):(o(),p("video",po,[c("source",{src:e(r),type:"video/mp4"},null,8,fo)]))])]))],64)):(o(),C(qe,{key:4},{default:k(()=>[f(b,{n:"primary",onClick:pe},{default:k(()=>[f(L,{icon:"carbon:send"}),F(" Send request ")]),_:1})]),_:1}))])}}}),vo={flex:"~ gap1","text-sm":""},ho={key:0,op50:""},yo={op50:""},go=c("span",{op75:""},"Select a route to start",-1),_o=c("div",{p4:"",border:"b base"},[c("span",{"text-lg":""},"Default Inputs"),c("br"),c("span",{"text-white":"",op50:""},"Merged as default for every request in DevTools")],-1),Eo=ae({__name:"server-routes",setup(l){const h=O(!1),m=lt(),n=ge(),{selectedRoute:w,view:_,inputDefaults:t}=Ie("serverRoutes"),y=R(()=>{!n.value&&w.value&&(n.value=w.value.filepath);const v=m.value?.find(d=>d.filepath===n.value);return n.value!==w.value?.filepath&&v&&(w.value=v),v}),r=O(""),a=R(()=>new at(m.value||[],{keys:["method","route"],shouldSort:!0})),U=R(()=>m.value?r.value?a.value.search(r.value).map(d=>d.item):m.value:[]),J=R(()=>{const v=[],d=(x,$)=>{x.routes=x.routes||[],x.routes.push($)};return U.value.forEach(x=>{const $=x.filepath.split("/"),g=$.slice($.indexOf("server")+1);g.length>0&&g[g.length-1].includes(".")&&g.pop();let P=null;if(g.forEach(q=>{const B=P?P.routes?.find(S=>S.route===q):v.find(S=>S.route===q);if(B)P=B;else{const S={route:q,filepath:q.replace(/\W/g,"-").toLowerCase(),type:"collection",routes:[]};P?d(P,S):v.push(S),P=S}}),x.type==="runtime"){const q=v.find(B=>B.route==="runtime");if(q)d(q,x);else{const B={route:"runtime",filepath:"runtime",type:"collection",routes:[x]};v.push(B)}}else P?d(P,x):v.push(x)}),v});function M(){_.value=_.value==="tree"?"list":"tree"}function z(v){return v.charAt(0).toUpperCase()+v.slice(1)}return(v,d)=>{const x=xe,$=dt,g=Re,P=mo,q=ut,B=we,S=rt,oe=Ve,H=ht,K=yt,X=Ce("tooltip");return o(),p(V,null,[f(S,{"storage-key":"tab-server-routes"},{left:k(()=>[f($,{search:e(r),"onUpdate:search":d[1]||(d[1]=T=>te(r)?r.value=T:null),pb2:""},{actions:k(()=>[de(f(x,{"text-lg":"",icon:e(_)==="list"?"i-carbon-list":"i-carbon-tree-view-alt",title:"Toggle view",onClick:M},null,8,["icon"]),[[X,"Toggle View"]]),de(f(x,{"text-lg":"",icon:"i-carbon-cics-sit-overrides",title:"Default Inputs",onClick:d[0]||(d[0]=T=>h.value=!e(h))},null,512),[[X,"Default Inputs"]])]),default:k(()=>[c("div",vo,[e(r)?(o(),p("span",ho,j(e(U).length)+" matched Â· ",1)):D("",!0),c("span",yo,j(e(m)?.length)+" routes in total",1)])]),_:1},8,["search"]),(o(!0),p(V,null,A(e(_)==="tree"?e(J):e(U),T=>(o(),C(g,{key:T.filepath,item:T},null,8,["item"]))),128))]),right:k(()=>[(o(),C(it,{max:10},[e(y)?(o(),C(P,{key:e(y).filepath,route:e(y),onOpenDefaultInput:d[2]||(d[2]=T=>h.value=!0)},null,8,["route"])):D("",!0)],1024)),e(y)?D("",!0):(o(),C(B,{key:0},{default:k(()=>[f(q,{px6:"",py2:""},{default:k(()=>[go]),_:1})]),_:1}))]),_:1}),f(K,{modelValue:e(h),"onUpdate:modelValue":d[3]||(d[3]=T=>te(h)?h.value=T:null),"auto-close":"","max-w-xl":"","min-w-xl":"",onClose:d[4]||(d[4]=T=>h.value=!1)},{default:k(()=>[c("div",null,[_o,(o(!0),p(V,null,A(Object.keys(e(t)),T=>(o(),C(H,{key:T,text:`${z(T)} ${e(t)[T].length?`(${e(t)[T].length})`:""}`,padding:!1,icon:("ServerRouteTabIcons"in v?v.ServerRouteTabIcons:e(Te))[T]},{default:k(()=>[f(oe,{modelValue:e(t)[T],"onUpdate:modelValue":Y=>e(t)[T]=Y,py0:"",default:{type:"string"}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["text","icon"]))),128))])]),_:1},8,["modelValue"])],64)}}});export{Eo as default};
