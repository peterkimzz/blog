import{d as O,r as S,W as Z,o as a,m as d,i as m,f as t,k as e,v as D,F as T,n as R,h as I,j as y,p as j,E as G,X as L,Y as ce,Z as ue,J as X,K as J,_ as Y,a0 as ee,U as te,C as ne,a as C,a1 as de,a2 as pe,a3 as oe,t as A,a4 as se,a5 as me,l as M,a6 as fe,b as Q,a7 as ve,e as he,a8 as _e,a9 as ae,H as W,V as ge,aa as xe,ab as be,ac as we}from"./entry.704683a1.js";import{_ as ye}from"./Navbar.vue.c8f5ea35.js";import{_ as $e}from"./NSectionBlock.6778ba18.js";import{_ as ke}from"./FilepathItem.vue.a9853d6c.js";import{_ as Ce}from"./CodeSnippets.vue.e2cc365d.js";import{_ as Pe}from"./DrawerRight.vue.3bbd0e76.js";import{D as Ae}from"./constants.4e5eba24.js";import"./NIconTitle.vue.e492e44a.js";import"./NCodeBlock.vue.a8601f10.js";import"./client.fbe3eaa6.js";const De={key:0,"h-full":"","w-full":"",flex:"","items-center":"","justify-center":""},Ve={for:"drop-zone-input","text-3xl":""},Ne={key:1,relative:"","h-full":"","w-full":"",grid:"~ rows-[max-content_1fr_max-content]"},Fe=e("div",{px6:"",py6:""},[e("h1",{"text-2xl":""}," Upload "),e("p",{"text-sm":"",op50:""}," Drag and drop files to upload ")],-1),Ie={grid:"~ cols-minmax-8rem","overflow-auto":"",p6:""},Se={flex:"","items-center":"","justify-center":"","of-hidden":"",rounded:"","rounded-t-lg":"","bg-active":"","object-cover":"",class:"aspect-1/1",border:"~ base"},Te=["src"],je={flex:"~ gap1","items-center":""},Ee={flex:"~ gap-2","items-center":"","justify-center":"",p8:""},Be=O({__name:"DropZone",props:{folder:{type:String,required:!0}},setup(V){const i=V,c=S(!1),o=S(),p=S([]),f=["image","video"];function z(s){o.value=s.target,c.value=!0}function v(s){s.target===o.value&&(c.value=!1)}function P(s){s.preventDefault()}function U(s){s.preventDefault(),E(s.dataTransfer.files)}function E(s){const u=Array.from(s||[]);if(u.length){const w=[],r=p.value.map(n=>n.name);for(const n of u)if(r.includes(n.name)){let l=1;const[_,k]=n.name.split(".");for(;r.includes(`${_} (${l}).${k}`);)l++;const $=`${_}-${l}.${k}`,q=new Blob([n],{type:n.type}),K=new File([q],$,{lastModified:Date.now()});w.push(K),r.push($)}else n.type===""?L({message:"Folders are not supported yet",icon:"carbon:face-dissatisfied",classes:"text-orange"}):f.some(l=>n.type.includes(l))?w.push(n):L({message:`"${n.type}" file type is not allowed`,icon:"carbon:face-dissatisfied",classes:"text-orange"});p.value=[...p.value,...w]}}async function g(){if(ce.value||ue.value)return;const s=[];for(const u of p.value){const w=new FileReader;w.readAsDataURL(u);const n=(await new Promise(l=>{w.onload=()=>l(w.result)})).split(";base64,").pop();s.push({name:u.name,data:n})}await X.writeStaticAssets(await J(),[...s],i.folder).then(()=>{N(),L({message:"Files uploaded successfully!",icon:"i-carbon:checkmark"})}).catch(u=>{console.error(u),N(),L({message:`Error uploading files: ${u}`,icon:"i-carbon-warning",classes:"text-red"})}),c.value=!1}function h(s){p.value?.splice(s,1)}function x(s){return URL.createObjectURL(s)}function B(s,u){const[w,r]=s.name.split("."),n=u.replace(/\.\w+$/,""),l=`${n}.${r}`;return n.length===0?(alert("File name must be at least 1 characters long"),w):(Object.defineProperty(s,"name",{value:l,writable:!1}),p.value.splice(p.value.indexOf(s),1,s),s)}function b(){p.value=[]}function N(){c.value=!1,b()}return Z("dragenter",z),Z("dragleave",v),Z("dragover",P),Z("drop",U),(s,u)=>{const w=Y,r=ee,n=te,l=ne;return a(),d("div",{fixed:"","bottom-0":"","left-13":"","right-0":"","top-0":"","z-10":"","backdrop-blur-20":"","transition-all":"",class:G(t(c)?"opacity-100 visible":"opacity-0 invisible")},[m(w,{icon:"carbon-close",absolute:"","right-5":"","top-5":"","z-20":"","text-xl":"",onClick:N}),t(p)?.length?(a(),d("div",Ne,[Fe,e("div",Ie,[(a(!0),d(T,null,R(t(p),(_,k)=>(a(),d("div",{key:_.name,flex:"~ col gap-2",relative:"","h-50":"","w-40":"","items-center":""},[e("div",Se,[e("img",{"h-full":"","w-full":"","rounded-t-lg":"","object-cover":"",src:x(_)},null,8,Te)]),e("div",je,[m(n,{n:"xs","flex-auto":"","model-value":_.name,"onUpdate:modelValue":$=>B(_,$.target.value)},null,8,["model-value","onUpdate:modelValue"]),m(w,{icon:"carbon-delete","flex-none":"",title:"Remove file",onClick:$=>h(k)},null,8,["onClick"])])]))),128))]),e("div",Ee,[t(p).length?(a(),I(l,{key:0,n:"red",onClick:b},{default:y(()=>[m(r,{icon:"carbon-clean"}),D(" Clear ")]),_:1})):j("",!0),m(l,{disabled:!t(p).length,n:"primary solid",onClick:g},{default:y(()=>[m(r,{icon:"carbon-cloud-upload"}),D(" Upload ")]),_:1},8,["disabled"])])])):(a(),d("div",De,[e("label",Ve,[m(r,{icon:"carbon-cloud-upload","mr-2":""}),D(" Drop files here or click to select ")]),e("input",{id:"drop-zone-input",type:"file",multiple:"",hidden:"",onChange:u[0]||(u[0]=_=>E(_.target.files))},null,32)]))],2)}}}),Le=O({__name:"AssetFontPreview",props:{asset:{}},setup(V){const i=V,c=C(()=>`devtools-assets-${de(i.asset)}`);return pe(C(()=>`
  @font-face {
    font-family: '${c.value}';
    src: url('${i.asset.publicPath}');
  }
`)),(o,p)=>(a(),d("div",{"of-hidden":"",style:oe({fontFamily:`'${t(c)}'`})}," Aa Bb Cc Dd Ee Ff Gg Hh Ii Jj Kk Ll Mm Nn Oo Pp Qq Rr Ss Tt Uu Vv Ww Xx Yy Zz ",4))}}),Ue={flex:"","items-center":"","justify-center":"","of-hidden":"","bg-active":"","object-cover":"",p1:""},ze=["src"],Me={key:2,"i-carbon-document":"","text-3xl":"",op20:""},Oe={key:3,"w-full":"","self-start":"",p4:""},Re=["textContent"],Xe={key:4},Ke=["src","autoplay","controls"],Ze={key:5,"i-carbon-help":"","text-3xl":"",op20:""},le=O({__name:"AssetPreview",props:{asset:{},textContent:{},detail:{type:Boolean}},setup(V){return(i,c)=>{const o=Le;return a(),d("div",Ue,[i.asset.type==="image"?(a(),d("img",{key:0,src:i.asset.publicPath},null,8,ze)):i.asset.type==="font"?(a(),I(o,{key:i.asset.publicPath,asset:i.asset,"self-stretch":"",p2:"","text-2xl":""},null,8,["asset"])):i.asset.type==="text"&&!i.textContent?(a(),d("div",Me)):i.asset.type==="text"&&i.textContent?(a(),d("div",Oe,[e("pre",{"max-h-10rem":"","of-hidden":"","text-xs":"","font-mono":"",textContent:A(i.textContent)},null,8,Re)])):i.asset.type==="video"?(a(),d("div",Xe,[e("video",{src:i.asset.publicPath,autoplay:i.detail,controls:i.detail},null,8,Ke)])):(a(),d("div",Ze))])}}}),Ge={flex:"~ col gap-1",hover:"bg-active","items-center":"","of-hidden":"",rounded:"",p2:""},We={"w-full":"","of-hidden":"",truncate:"","ws-nowrap":"","text-center":"","text-xs":""},qe=O({__name:"AssetGridItem",props:{asset:{},folder:{}},setup(V){const i=V,c=C(()=>i.folder&&i.asset.path.startsWith(i.folder)?i.asset.path.slice(i.folder.length):i.asset.path);return(o,p)=>{const f=le;return a(),d("button",Ge,[m(f,{"h-30":"","w-30":"",rounded:"",border:"~ base",asset:o.asset},null,8,["asset"]),e("div",We,A(t(c)),1)])}}}),He=e("div",{"x-divider":""},null,-1),ie=O({__name:"AssetListItem",props:{item:{},index:{default:0},modelValue:{}},setup(V,{emit:i}){const c=V,o=se(c,"modelValue",i,{passive:!0}),p=C(()=>c.item?.children?.length),f=S(!0),z=C(()=>p.value?"i-carbon-folder":c.item.type==="image"?"i-carbon-image":c.item.type==="video"?"i-carbon-video":c.item.type==="audio"?"i-carbon-volume-up":c.item.type==="font"?"i-carbon-text-small-caps":c.item.type==="text"?"i-carbon-document":c.item.type==="json"?"i-carbon-json":"i-carbon-document-blank");return(v,P)=>{const U=ee,E=ie;return a(),d("div",null,[e("button",{flex:"~ gap-2","w-full":"","items-center":"",hover:"bg-active",px4:"",py1:"",style:oe({paddingLeft:`calc(1rem + ${v.index*1.5}em)`}),class:G({"bg-active":!t(p)&&t(o)?.filePath===v.item?.filePath}),onClick:P[0]||(P[0]=g=>t(p)?f.value=!t(f):o.value=v.item)},[e("div",{class:G(t(z))},null,2),e("span",{class:G({"flex items-center":t(p)}),"flex-auto":"","text-start":"","text-sm":"","font-mono":""},A(v.item.path),3),t(p)?(a(),I(U,{key:0,icon:"carbon:chevron-right","transform-rotate":t(f)?90:0,transition:""},null,8,["transform-rotate"])):j("",!0)],6),He,t(f)?me(v.$slots,"default",{key:0},()=>[(a(!0),d(T,null,R(v.item?.children,g=>(a(),I(E,{key:g.filepath,modelValue:t(o),"onUpdate:modelValue":P[1]||(P[1]=h=>M(o)?o.value=h:null),item:g,index:v.index+1},null,8,["modelValue","item","index"]))),128))]):j("",!0)])}}}),Je={flex:"~ col gap-4","min-h-full":"","w-full":"","of-hidden":"",p4:""},Ye=e("div",{flex:"~ gap2","mb--2":"","items-center":"",op50:""},[e("div",{"x-divider":""}),e("div",{"flex-none":""}," Preview "),e("div",{"x-divider":""})],-1),Qe={flex:"~","items-center":"","justify-center":""},et=e("div",{flex:"~ gap2","mb--2":"","items-center":"",op50:""},[e("div",{"x-divider":""}),e("div",{"flex-none":""}," Details "),e("div",{"x-divider":""})],-1),tt={"max-w-full":"","w-full":"","table-fixed":""},nt=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Filepath ",-1),ot={flex:"~ gap-1","w-full":"","items-center":""},st=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Public Path ",-1),at={flex:"~ gap-1","w-full":"","items-center":"","of-hidden":""},lt={"flex-auto":"","of-hidden":"",truncate:"","ws-pre":"","font-mono":""},it=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Type ",-1),rt={capitalize:""},ct=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Image Size ",-1),ut={key:0},dt=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Aspect Ratio ",-1),pt=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," File size ",-1),mt=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Last modified ",-1),ft={op70:""},vt=e("div",{flex:"~ gap2","mb--2":"","items-center":"",op50:""},[e("div",{"x-divider":""}),e("div",{"flex-none":""}," Actions "),e("div",{"x-divider":""})],-1),ht={flex:"~ gap2 wrap"},_t=e("div",{"flex-auto":""},null,-1),gt={flex:"~ col gap-4","min-h-full":"","w-full":"","of-hidden":"",p8:""},xt=e("span",null," Are you sure you want to delete this asset? ",-1),bt={flex:"~ gap2 wrap justify-center"},wt={flex:"~ col gap-4","min-h-full":"","w-full":"","of-hidden":"",p8:""},yt={flex:"~ gap2 wrap justify-center"},$t=O({__name:"AssetDetails",props:{modelValue:{}},setup(V,{emit:i}){const o=se(V,"modelValue",i,{passive:!0}),p=fe(),f=Q(()=>{if(o.value.type==="image")return X.getImageMeta(o.value.filePath)}),z=Q(()=>{if(o.value.type==="text")return X.getTextAssetContent(o.value.filePath)}),v=ve(),P=C(()=>(v.value?._installedModules||[]).some(n=>n.meta?.name==="@nuxt/image"||n.meta?.name==="@nuxt/image-edge")),U=C(()=>{const r=[];if(o.value.type==="image"){const n=f.value?.width?`
  width="${f.value.width}"
  height="${f.value.height}" `:" ";return r.push({lang:"vue-html",code:`<img${n}
  src="${o.value.publicPath}"
/>`,name:"Plain Image"}),P.value&&r.push({lang:"vue-html",code:`<NuxtImage${n}
  src="${o.value.publicPath}"
/>`,name:"Nuxt Image",docs:"https://image.nuxtjs.org/components/nuxt-img"},{lang:"vue-html",code:`<NuxtPicture${n}
  src="${o.value.publicPath}"
/>`,name:"Nuxt Picture",docs:"https://image.nuxtjs.org/components/nuxt-picture"}),r}return r.push({lang:"html",code:`<a download href="${o.value.publicPath}">
  Download ${o.value.path.split("/").slice(-1)[0]}
</a>`,name:"Download link"}),r}),E=he(),g=_e(()=>o.value.mtime),h=C(()=>{const r=o.value.size;return r<1024?`${r} B`:r<1024*1024?`${(r/1024).toFixed(2)} KB`:`${(r/1024/1024).toFixed(2)} MB`}),x=C(()=>{if(!f.value?.width||!f.value?.height)return"";const r=(l,_)=>_?r(_,l%_):l,n=r(f.value.width,f.value.height);return n>3?`${f.value.width/n}:${f.value.height/n}`:""}),B=C(()=>["image","text","video","font"].includes(o.value.type)),b=S(!1);async function N(){try{await X.deleteStaticAsset(await J(),o.value.filePath),o.value=void 0,b.value=!1,L({message:"Asset deleted",icon:"i-carbon-checkmark",classes:"text-green"})}catch{L({message:"Something went wrong!",icon:"i-carbon-warning",classes:"text-red"})}}const s=S(!1),u=S("");async function w(){const r=o.value.filePath.split("/"),n=r.slice(-1)[0].split(".").slice(0,-1).join(".");if(!u.value||u.value===n)return L({message:"Please enter a new name",icon:"i-carbon-warning",classes:"text-orange"});try{const l=r.slice(-1)[0].split(".").slice(-1)[0],_=`${r.slice(0,-1).join("/")}/${u.value}.${l}`;await X.renameStaticAsset(await J(),o.value.filePath,_),o.value=void 0,s.value=!1,L({message:"Asset renamed",icon:"i-carbon-checkmark",classes:"text-green"})}catch{L({message:"Something went wrong!",icon:"i-carbon-warning",classes:"text-red"})}}return(r,n)=>{const l=le,_=ke,k=Y,$=ne,q=Ce,K=ge,re=te,H=ae("tooltip");return a(),d(T,null,[e("div",Je,[t(B)?(a(),d(T,{key:0},[Ye,e("div",Qe,[m(l,{detail:"","max-h-80":"","min-h-20":"","min-w-20":"","w-auto":"",rounded:"",border:"~ base",asset:t(o),"text-content":t(z)},null,8,["asset","text-content"])])],64)):j("",!0),et,e("table",tt,[e("tbody",null,[e("tr",null,[nt,e("td",null,[e("div",ot,[m(_,{filepath:t(o).filePath,"text-left":""},null,8,["filepath"]),W(m(k,{"flex-none":"",title:"Open in Editor",icon:"carbon-launch",onClick:n[0]||(n[0]=F=>t(p)(t(o).filePath))},null,512),[[H,"Open in Editor"]])])])]),e("tr",null,[st,e("td",null,[e("div",at,[e("div",lt,A(t(o).publicPath),1),W(m(k,{"flex-none":"",title:"Copy public path",icon:"carbon-copy",onClick:n[1]||(n[1]=F=>t(E)(t(o).publicPath))},null,512),[[H,"Copy public path"]]),W(m(k,{"flex-none":"",to:t(o).publicPath,icon:"carbon-launch",target:"_blank",title:"Open in browser"},null,8,["to"]),[[H,"Open in browser"]])])])]),e("tr",null,[it,e("td",rt,A(t(o).type),1)]),t(f)?.width?(a(),d(T,{key:0},[e("tr",null,[ct,e("td",null,A(t(f).width)+" x "+A(t(f).height),1)]),t(x)?(a(),d("tr",ut,[dt,e("td",null,A(t(x)),1)])):j("",!0)],64)):j("",!0),e("tr",null,[pt,e("td",null,A(t(h)),1)]),e("tr",null,[mt,e("td",null,[D(A(new Date(t(o).mtime).toLocaleString())+" ",1),e("span",ft,"("+A(t(g))+")",1)])])])]),vt,e("div",ht,[m($,{to:t(o).publicPath,download:"",target:"_blank",icon:"carbon-download",n:"green"},{default:y(()=>[D(" Download ")]),_:1},8,["to"]),m($,{icon:"carbon-text-annotation-toggle",n:"blue",onClick:n[2]||(n[2]=F=>s.value=!t(s))},{default:y(()=>[D(" Rename ")]),_:1}),m($,{icon:"carbon-delete",n:"red",onClick:n[3]||(n[3]=F=>b.value=!t(b))},{default:y(()=>[D(" Delete ")]),_:1}),t(o).type==="image"?(a(),I($,{key:0,disabled:"",icon:"carbon-image-service"},{default:y(()=>[D(" Optimize image (Coming soon) ")]),_:1})):j("",!0)]),_t,t(U).length?(a(),I(q,{key:1,border:"t base","mx--4":"","mb--4":"","code-snippets":t(U)},null,8,["code-snippets"])):j("",!0)]),m(K,{modelValue:t(b),"onUpdate:modelValue":n[5]||(n[5]=F=>M(b)?b.value=F:null)},{default:y(()=>[e("div",gt,[xt,e("div",bt,[m($,{icon:"carbon-close",onClick:n[4]||(n[4]=F=>b.value=!1)},{default:y(()=>[D(" Cancel ")]),_:1}),m($,{icon:"carbon-delete",n:"red",onClick:N},{default:y(()=>[D(" Delete ")]),_:1})])])]),_:1},8,["modelValue"]),m(K,{modelValue:t(s),"onUpdate:modelValue":n[8]||(n[8]=F=>M(s)?s.value=F:null)},{default:y(()=>[e("div",wt,[m(re,{modelValue:t(u),"onUpdate:modelValue":n[6]||(n[6]=F=>M(u)?u.value=F:null),placeholder:"New name",n:"blue"},null,8,["modelValue"]),e("div",yt,[m($,{icon:"carbon-close",onClick:n[7]||(n[7]=F=>s.value=!1)},{default:y(()=>[D(" Cancel ")]),_:1}),m($,{icon:"carbon-text-annotation-toggle",n:"blue",onClick:w},{default:y(()=>[D(" Rename ")]),_:1})])])]),_:1},8,["modelValue"])],64)}}}),kt={"h-full":"","of-auto":""},Ct={"flex-none":"",flex:"~ gap2 items-center"},Pt={op50:""},At={key:0},Dt={"mt--4":"",px2:"",grid:"~ cols-minmax-8rem"},Vt={key:1,p2:"",grid:"~ cols-minmax-8rem"},Nt={key:1},Mt=O({__name:"assets",setup(V){const i=xe(),c=S(""),o=C(()=>new be(i.value||[],{keys:["path"]})),p=C(()=>c.value?o.value.search(c.value).map(h=>h.item):i.value||[]),f=C(()=>{const g={};for(const h of p.value){const x=`${h.path.split("/").slice(0,-1).join("/")}/`;g[x]||(g[x]=[]),g[x].push(h)}return Object.entries(g).sort(([h],[x])=>h.localeCompare(x))}),z=C(()=>{const g={path:"public",children:[]},h=(x,B,b)=>{const[N,...s]=B;let u=x.children.find(w=>w.path===N);u||(u={...b,path:N,children:[]},x.children.push(u)),s.length>1?h(u,s,b):s.length===1&&u.children.push({...b,path:s[0]})};return p.value.forEach(x=>{const B=x.path.split("/").filter(b=>b!=="");h(g,B,x)}),g.children}),v=S(),P=S("grid");function U(){P.value=P.value==="list"?"grid":"list"}we("Escape",()=>{v.value=void 0});const E=S();return(g,h)=>{const x=Y,B=ye,b=Be,N=qe,s=$e,u=ie,w=$t,r=Pe,n=ae("tooltip");return a(),d("div",kt,[m(B,{ref_key:"navbar",ref:E,search:t(c),"onUpdate:search":h[0]||(h[0]=l=>M(c)?c.value=l:null),pb2:""},{actions:y(()=>[e("div",Ct,[W(m(x,{"text-lg":"",icon:t(P)==="grid"?"i-carbon-list":"i-carbon-grid",title:"Toggle view",onClick:U},null,8,["icon"]),[[n,"Toggle View",void 0,{"bottom-end":!0}]])])]),default:y(()=>[e("div",Pt,[t(c)?(a(),d("span",At,A(t(p).length)+" matched · ",1)):j("",!0),e("span",null,A(t(i)?.length)+" assets in total",1)])]),_:1},8,["search"]),m(b,{folder:"/"}),t(P)==="grid"?(a(),d(T,{key:0},[t(f).length>1?(a(!0),d(T,{key:0},R(t(f),([l,_])=>(a(),I(s,{key:l,text:l,description:`${_.length} items`,open:_.length<=("DETAILS_MAX_ITEMS"in g?g.DETAILS_MAX_ITEMS:t(Ae)),padding:!1},{default:y(()=>[e("div",Dt,[(a(!0),d(T,null,R(_,k=>(a(),I(N,{key:k.path,asset:k,folder:l,onClick:$=>v.value=k},null,8,["asset","folder","onClick"]))),128))])]),_:2},1032,["text","description","open"]))),128)):(a(),d("div",Vt,[(a(!0),d(T,null,R(t(p),l=>(a(),I(N,{key:l.path,asset:l,onClick:_=>v.value=l},null,8,["asset","onClick"]))),128))]))],64)):(a(),d("div",Nt,[(a(!0),d(T,null,R(t(z),(l,_)=>(a(),I(u,{key:_,modelValue:t(v),"onUpdate:modelValue":h[1]||(h[1]=k=>M(v)?v.value=k:null),item:l},null,8,["modelValue","item"]))),128))])),m(r,{"model-value":!!t(v),"auto-close":"","w-120":"",navbar:t(E),onClose:h[3]||(h[3]=l=>v.value=void 0)},{default:y(()=>[t(v)?(a(),I(w,{key:0,modelValue:t(v),"onUpdate:modelValue":h[2]||(h[2]=l=>M(v)?v.value=l:null)},null,8,["modelValue"])):j("",!0)]),_:1},8,["model-value","navbar"])])}}});export{Mt as default};
