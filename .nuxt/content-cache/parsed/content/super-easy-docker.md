{"parsed":{"_path":"/super-easy-docker","_dir":"","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"정말 너무 쉬운 Docker","description":"우리가 Docker를 사용해야하는 가장 큰 이유는, 어떤 컴퓨터에서든 똑같은 개발 환경을 보장해주기 떄문입니다. 로컬 컴퓨터에서 열심히 개발하고 AWS에 코드를 올렸는데, 에러를 마주하며 스트레스를 받았던 경험이 한 번쯤은 있을겁니다. 내 컴퓨터랑 클라우드 컴퓨터의 환경이 100% 똑같지 않기 때문이죠. 근데 이 어려움을 한 번에 해결해준다? 쓰지 말아야 할 이유가 없습니다.","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"우리가 "},{"type":"element","tag":"a","props":{"href":"https://docker.com","rel":["nofollow"]},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Docker"}]}]},{"type":"text","value":"를 사용해야하는 가장 큰 이유는, 어떤 컴퓨터에서든 똑같은 개발 환경을 보장해주기 떄문입니다. 로컬 컴퓨터에서 열심히 개발하고 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"AWS"}]},{"type":"text","value":"에 코드를 올렸는데, 에러를 마주하며 스트레스를 받았던 경험이 한 번쯤은 있을겁니다. 내 컴퓨터랑 클라우드 컴퓨터의 환경이 100% 똑같지 않기 때문이죠. 근데 이 어려움을 한 번에 해결해준다? 쓰지 말아야 할 이유가 없습니다."}]}]},"category":"tech","updated":"2021-06-09T00:00:00.000Z","created":"2021-06-09T00:00:00.000Z","image":"https://dynamisign.com/api/sign?t=%EC%A0%95%EB%A7%90%20%EB%84%88%EB%AC%B4%20%EC%89%AC%EC%9A%B4%20Docker&d=peterkimzz.com","published":true,"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"우리가 "},{"type":"element","tag":"a","props":{"href":"https://docker.com","rel":["nofollow"]},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Docker"}]}]},{"type":"text","value":"를 사용해야하는 가장 큰 이유는, 어떤 컴퓨터에서든 똑같은 개발 환경을 보장해주기 떄문입니다. 로컬 컴퓨터에서 열심히 개발하고 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"AWS"}]},{"type":"text","value":"에 코드를 올렸는데, 에러를 마주하며 스트레스를 받았던 경험이 한 번쯤은 있을겁니다. 내 컴퓨터랑 클라우드 컴퓨터의 환경이 100% 똑같지 않기 때문이죠. 근데 이 어려움을 한 번에 해결해준다? 쓰지 말아야 할 이유가 없습니다."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"이 뿐만이 아닙니다. 내 앱을 실행하기 위한 모든 과정을 미리 패키징해두면 몇 초만에 앱 수 십개를 구동할 수도 있습니다. 서비스를 확장할수록 더 많은 인스턴스를 운영해야하기 때문에 반드시 도커를 사용해야 할 시점이 오게 됩니다."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"이번 포스팅에서는 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"node.js"}]},{"type":"text","value":"와 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"typescript"}]},{"type":"text","value":"를 사용하는 아주 간단한 서버를 도커라이징하고, 도커를 더 쉽고 효율적으로 사용하는 몇 가지 팁들을 알려드리겠습니다."}]},{"type":"element","tag":"h2","props":{"id":"nodejs-서버-만들기"},"children":[{"type":"text","value":"Node.js 서버 만들기"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"일단 프로젝트 폴더를 구성합니다."}]},{"type":"element","tag":"code","props":{"className":["language-bash"],"code":"$ mkdir node-docker\n$ cd node-docker\n\n$ yarn init -y # package.json 만들기\n","filename":"shell","language":"bash","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-806137"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"mkdir"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"node-docker\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-806137"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"node-docker\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-806137"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"yarn"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"init"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"-y"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-326375"},"children":[{"type":"text","value":"# package.json 만들기"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"다음은 노드 서버를 돌리기 위한 패키지를 설치하고, 앱의 진입점이 될 타입스크립트 파일까지 만들어줍니다."}]},{"type":"element","tag":"code","props":{"className":["language-bash"],"code":"$ yarn add express\n$ yarn add -D typescript ts-node nodemon @types/node @types/express\n\n$ touch index.ts\n$ npx tsc --init # tsconfig.json 만들기\n","filename":"shell","language":"bash","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-806137"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"yarn"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"add"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"express\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-806137"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"yarn"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"add"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"-D"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"typescript"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"ts-node"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"nodemon"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"@types/node"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"@types/express\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-806137"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"touch"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"index.ts\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-806137"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"npx"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"tsc"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"--init"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-326375"},"children":[{"type":"text","value":"# tsconfig.json 만들기"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"여기까지 하면 우리 프로젝트 폴더의 구조는 다음과 같습니다."}]},{"type":"element","tag":"code","props":{"className":["language-undefined"],"code":"node-docker/\n|-- node_modules\n|-- index.ts\n|-- package.json\n|-- tsconfig.json\n|-- yarn.lock\n"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"node-docker/\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"|-- node_modules\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"|-- index.ts\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"|-- package.json\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"|-- tsconfig.json\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"|-- yarn.lock"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"express"}]},{"type":"text","value":"는 노드에서 가장 많이 사용하는 서버 라이브러리입니다. 그럼 바로 스크립트를 작성하도록 합니다."}]},{"type":"element","tag":"code","props":{"className":["language-ts"],"code":"import express from \"express\";\nconst app = express();\n\napp.get(\"/\", (req, res) => {\n  res.json({ message: \"Hello, Docker!\" });\n});\n\napp.listen(3000);\nconsole.log(\"http://localhost:3000..\");\n","filename":"index.ts","language":"ts","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" express "}]},{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"\"express\""}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"app"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-806137"},"children":[{"type":"text","value":"express"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"app."}]},{"type":"element","tag":"span","props":{"class":"ct-806137"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"\"/\""}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":", ("}]},{"type":"element","tag":"span","props":{"class":"ct-657843"},"children":[{"type":"text","value":"req"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-657843"},"children":[{"type":"text","value":"res"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"  res."}]},{"type":"element","tag":"span","props":{"class":"ct-806137"},"children":[{"type":"text","value":"json"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"({ message: "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"\"Hello, Docker!\""}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"});\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"app."}]},{"type":"element","tag":"span","props":{"class":"ct-806137"},"children":[{"type":"text","value":"listen"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"3000"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"console."}]},{"type":"element","tag":"span","props":{"class":"ct-806137"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"\"http://localhost:3000..\""}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":");"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"서버에 요청할 때 마다 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Hello, Docker!"}]},{"type":"text","value":"를 응답하는 간단한 서버입니다."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"서버 코드를 작성했으니 앱을 실행시켜야겠죠. "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"package.json"}]},{"type":"text","value":" 파일을 수정합니다."}]},{"type":"element","tag":"code","props":{"className":["language-json"],"code":"{\n  \"scripts\": {\n    \"start\": \"node index.js\",\n    \"dev\": \"nodemon -L --exec ts-node index.ts\",\n    \"build\": \"tsc\"\n  }\n}\n","filename":"package.json","language":"json","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"\"scripts\""}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":": {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"\"start\""}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"\"node index.js\""}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"\"dev\""}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"\"nodemon -L --exec ts-node index.ts\""}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"\"build\""}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"\"tsc\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"터미널에 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"yarn dev"}]},{"type":"text","value":"를 입력하고, 브라우저를 통해 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"localhost:3000"}]},{"type":"text","value":"으로 접속해보면 메세지를 응답 받을 수 있습니다."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"추가로 개발 환경 때 시간 단축을 위해 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nodemon"}]},{"type":"text","value":" 패키지를 사용합니다. "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-L"}]},{"type":"text","value":" (Legacy Watch) 플래그를 넣는 이유는 WindowsOS에서 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ts"}]},{"type":"text","value":" 파일을 수정할 때 인식이 안되는 버그가 있어서 그렇습니다."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"image","src":"https://user-images.githubusercontent.com/20244536/121014877-69af7500-c7d5-11eb-814c-dcbc963acdff.png"},"children":[]}]},{"type":"element","tag":"h2","props":{"id":"dockerfile"},"children":[{"type":"text","value":"Dockerfile"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"도커를 사용하기 위해 사용자 컴퓨터에 도커를 설치해야하는데, "},{"type":"element","tag":"a","props":{"href":"https://www.docker.com/get-started","rel":["nofollow"]},"children":[{"type":"text","value":"도커 홈페이지"}]},{"type":"text","value":"에서 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Docker Desktop"}]},{"type":"text","value":"을 다운로드 해주세요."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"잘 설치했다면 터미널에서 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"docker"}]},{"type":"text","value":" 명령어를 사용할 수 있습니다."}]},{"type":"element","tag":"code","props":{"className":["language-undefined"],"code":"$ docker -v\nDocker version 20.10.6, build 370c289\n"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"$ docker -v\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"Docker version 20.10.6, build 370c289"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"자 그럼 도커를 사용하기 위해 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Dockerfile"}]},{"type":"text","value":" 을 작성해야 합니다. 별 거 없습니다. 그냥 어떤 순서로 앱을 패키징할지 나열하는 것 뿐입니다."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"프로젝트 루트 폴더에 도커파일을 만들어주세요. (대문자 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"D"}]},{"type":"text","value":" 오타 아닙니다)"}]},{"type":"element","tag":"code","props":{"className":["language-bash"],"code":"$ touch Dockerfile\n","language":"bash","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-806137"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"touch"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"Dockerfile"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"그럼 node 앱을 돌리기 위한 간단한 도커파일을 작성합니다."}]},{"type":"element","tag":"code","props":{"className":["language-dockerfile"],"code":"\n# 어떤 환경에서 도커 이미지를 만들지 결정하기.\nFROM node:14-slim\n\n# 도커 컨테이너 내부의 작업 디렉토리 결정하기. 원하는 대로 정하면 됩니다.\nWORKDIR /usr/src/app\n\n# 외부 패키지 설치를 위해 package.json과 yarn.lock 파일 복사\nCOPY package.json .\nCOPY yarn.lock .\n\n# 패키지 설치\nRUN yarn\n\n# 나머지 모두 복사\nCOPY . .\n\n# 도커 컨테이너에 접근할 수 있게 포트 열어주기\nEXPOSE 3000\n\n# 앱 실행시키기\nCMD [ \"yarn\", \"dev\" ]\n","filename":"Dockerfile","language":"dockerfile","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-326375"},"children":[{"type":"text","value":"# 어떤 환경에서 도커 이미지를 만들지 결정하기.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"FROM"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" node:14-slim\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-326375"},"children":[{"type":"text","value":"# 도커 컨테이너 내부의 작업 디렉토리 결정하기. 원하는 대로 정하면 됩니다.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"WORKDIR"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" /usr/src/app\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-326375"},"children":[{"type":"text","value":"# 외부 패키지 설치를 위해 package.json과 yarn.lock 파일 복사\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"COPY"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" package.json .\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"COPY"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" yarn.lock .\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-326375"},"children":[{"type":"text","value":"# 패키지 설치\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"RUN"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" yarn\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-326375"},"children":[{"type":"text","value":"# 나머지 모두 복사\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"COPY"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" . .\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-326375"},"children":[{"type":"text","value":"# 도커 컨테이너에 접근할 수 있게 포트 열어주기\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"EXPOSE"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" 3000\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-326375"},"children":[{"type":"text","value":"# 앱 실행시키기\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"CMD"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" [ "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"\"yarn\""}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"\"dev\""}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" ]"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"참고로 도커 파일을 통해 패키징한 결과물을 "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"이미지"}]},{"type":"text","value":"라고 합니다. 그리고 이 이미지를 저장하는 곳은 "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"레지스트리"}]},{"type":"text","value":" 라고 합니다. 우리가 깃 프로젝트를 깃허브 리파지토리에 올리는 것과 비슷한 겁니다. 그래서 이 이미지들도 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Docker Hub"}]},{"type":"text","value":"나 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"AWS ECR"}]},{"type":"text","value":" 같은 원격 레지스트리에 저장시켜서 사용합니다."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"아무튼 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Dockerfile"}]},{"type":"text","value":" 작성에 대한 방법은, 그냥 받아들이면 됩니다. 한 가지 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"COPY"}]},{"type":"text","value":" 명령어가 직관적으로 이해가 안갈 수 있습니다."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"COPY A B"}]},{"type":"text","value":" 이런식으로 사용하면 되고, A가 내 컴퓨터 쪽, B가 도커 컨테이너 쪽입니다. A를 B로 복사한다는 뜻입니다."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"이제 이 도커파일을 이용해 이미지를 만들어봅시다. 터미널에 입력해주세요."}]},{"type":"element","tag":"code","props":{"className":["language-bash"],"code":"$ docker build . -t node_app\n\n[+] Building 11.6s (12/12) FINISHED\n => [internal] load build definition from Dockerfile                                                       0.0s\n => => transferring dockerfile: 187B                                                                       0.0s\n => [internal] load .dockerignore                                                                          0.0s\n => => transferring context: 2B                                                                            0.0s\n => [internal] load metadata for docker.io/library/node:14-slim                                            2.2s\n => [auth] library/node:pull token for registry-1.docker.io                                                0.0s\n => CACHED [1/6] FROM docker.io/library/node:14-slim@sha256:a3ff0656dfa88cc5c4092af3e18d16cbbbf50417ce4d0  0.0s\n => [internal] load build context                                                                          1.3s\n => => transferring context: 1.07MB                                                                        1.1s\n => [2/6] WORKDIR /usr/src/app                                                                             0.0s\n => [3/6] COPY package.json .                                                                              1.1s\n => [4/6] COPY yarn.lock .                                                                                 0.0s\n => [5/6] RUN yarn                                                                                         5.1s\n => [6/6] COPY . .                                                                                         0.9s\n => exporting to image                                                                                     0.9s\n => => exporting layers                                                                                    0.9s\n => => writing image sha256:33c768313fd785507812a137e90fdf97f629edd91d06851846ba416df6a62277               0.0s\n => => naming to docker.io/library/node_app                                                                0.0s\n","filename":"shell","language":"bash","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-806137"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"build"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"-t"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"node_app\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"[+] Building 11.6s ("}]},{"type":"element","tag":"span","props":{"class":"ct-806137"},"children":[{"type":"text","value":"12/12"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":") FINISHED\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" => [internal] load build definition from Dockerfile                                                       0.0s\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" => ="}]},{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"transferring"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"dockerfile:"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"187"}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"B"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"                                                                       "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"0.0"}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"s\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" => [internal] load .dockerignore                                                                          0.0s\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" => ="}]},{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"transferring"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"context:"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"B"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"                                                                            "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"0.0"}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"s\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" => [internal] load metadata "}]},{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" docker.io/library/node:14-slim                                            2.2s\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" => [auth] library/node:pull token "}]},{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" registry-1.docker.io                                                0.0s\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" => "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"CACHED"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" [1/6] FROM docker.io/library/node:14-slim@sha256:a3ff0656dfa88cc5c4092af3e18d16cbbbf50417ce4d0  0.0s\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" => [internal] load build context                                                                          1.3s\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" => ="}]},{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"transferring"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"context:"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"1.07"}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"MB"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"                                                                        "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"1.1"}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"s\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" => [2/6] WORKDIR /usr/src/app                                                                             0.0s\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" => [3/6] COPY package.json "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"                                                                              1.1s\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" => [4/6] COPY yarn.lock "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"                                                                                 0.0s\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" => [5/6] RUN yarn                                                                                         5.1s\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" => [6/6] COPY "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"                                                                                         0.9s\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" => "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"exporting"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"to"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"image"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"                                                                                     "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"0.9"}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"s\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" => ="}]},{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"exporting"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"layers"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"                                                                                    "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"0.9"}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"s\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" => ="}]},{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"writing"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"image"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"sha256:33c768313fd785507812a137e90fdf97f629edd91d06851846ba416df6a62277"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"               "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"0.0"}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"s\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" => ="}]},{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"naming"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"to"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"docker.io/library/node_app"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"                                                                "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"0.0"}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"s"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"한 가지 알아둘 부분은, "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-t"}]},{"type":"text","value":" 는 태그를 지정한다는 뜻입니다. 지정하지 않으면 이름이 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NONE"}]},{"type":"text","value":" 으로 지정되면서 사용하는 데 불편하므로 태깅을 잘 해주세요."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"아래는 빌드된 이미지를 확인하는 방법입니다."}]},{"type":"element","tag":"code","props":{"className":["language-bash"],"code":"$ docker images\n\nREPOSITORY   TAG       IMAGE ID       CREATED              SIZE\nnode_app     latest    33c768313fd7   About a minute ago   382MB\n","filename":"shell","language":"bash","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-806137"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"images\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-806137"},"children":[{"type":"text","value":"REPOSITORY"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"TAG"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"       "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"IMAGE"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"ID"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"       "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"CREATED"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"              "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"SIZE\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-806137"},"children":[{"type":"text","value":"node_app"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"     "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"latest"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"33"}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"c768313fd7"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"About"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"minute"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"ago"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"382"}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"MB"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"빌드된 이미지를 실행시켜봐야겠죠. 아래 명령어를 입력해주세요."}]},{"type":"element","tag":"code","props":{"className":["language-bash"],"code":"$ docker run -p 3000:3000 node_app\n\n# 이렇게 컨테이너를 여러 개 실행시킬 수도 있음. 포트 바꿔서 들어가보세요.\n$ docker run -p 3001:3000 node_app\n$ docker run -p 3002:3000 node_app\n","filename":"shell","language":"bash","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-806137"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"run"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"3000"}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":":3000"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"node_app\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-326375"},"children":[{"type":"text","value":"# 이렇게 컨테이너를 여러 개 실행시킬 수도 있음. 포트 바꿔서 들어가보세요.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-806137"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"run"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"3001"}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":":3000"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"node_app\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-806137"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"run"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"-p"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"3002"}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":":3000"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"node_app"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"브라우저를 통해 접속이 된다면 성공입니다. 이렇게 빌드된 이미지를 실행시키면, 그걸 "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"컨테이너"}]},{"type":"text","value":"라고 부릅니다."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"현재 실행 중인 모든 컨테이너 목록을 보고 싶으면 아래 명령어를 입력해주세요."}]},{"type":"element","tag":"code","props":{"className":["language-bash"],"code":"$ docker ps -a\n\nCONTAINER ID   IMAGE      COMMAND                  CREATED          STATUS          PORTS                                       NAMES\n36f74a13d90d   node_app   \"docker-entrypoint.s…\"   12 seconds ago   Up 10 seconds   0.0.0.0:3000->3000/tcp, :::3000->3000/tcp   upbeat_blackburn\n","filename":"shell","language":"bash","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-806137"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"ps"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"-a\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-806137"},"children":[{"type":"text","value":"CONTAINER"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"ID"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"IMAGE"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"COMMAND"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"                  "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"CREATED"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"STATUS"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"PORTS"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"                                       "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"NAMES\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-806137"},"children":[{"type":"text","value":"36f74a13d90d"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"node_app"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"\"docker-entrypoint.s…\""}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"12"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"seconds"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"ago"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"Up"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"seconds"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"0.0"}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":".0.0:3000"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"3000/tcp,"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":":::3000"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"3000/tcp"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"upbeat_blackburn"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"쓱 한 번 보고 넘어가세요. "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"STATUS"}]},{"type":"text","value":" 부분이 Up이라고 되어있으면 앱이 돌아간다는 뜻이니까, 컨테이너를 삭제하고 싶다면 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"CONTAINER ID"}]},{"type":"text","value":"를 이용해 삭제해줍시다."}]},{"type":"element","tag":"code","props":{"className":["language-bash"],"code":"$ docker rm -f 36f74a13d90d\n","filename":"shell","language":"bash","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-806137"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"rm"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"-f"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"36"}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"f74a13d90d"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"docker-compose"},"children":[{"type":"text","value":"Docker Compose"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"지금까지 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Docker CLI"}]},{"type":"text","value":"를 이용해서 이것 저것 해보았습니다만, 저는 CLI로 docker를 사용하는 것을 추천하지 않습니다. 도커 특성상 많은 옵션을 주어야 하는데 언제 일일히 치고 있나요. 명령어가 길어져서 보기 안좋습니다."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"그리고 지금은 이미지 1개만 띄우니까 괜찮지만, 나중에는 몇 개를 띄워야 할 지 모릅니다. 그 때 마다 일일히 이미지 하나씩 올리는 건 상당히 귀찮은 일이겠죠."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"그래서 여러 이미지를 한 번에 관리할 수 있게끔 개발된 게 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Docker Compose"}]},{"type":"text","value":" 입니다. 바로 예제를 보도록 하죠."}]},{"type":"element","tag":"code","props":{"className":["language-yaml"],"code":"version: \"3.9\"\n\nservices:\n  app: # 이미지 이름 (마음대로 설정해도 됩니다)\n    build: . # Dockerfile이 있는 경로를 넣어주기\n    ports:\n      - \"3000:3000\" # docker CLI의 \"-p 3000:3000\" 과 같은 표현\n","filename":"docker-compose.yml","language":"yaml","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-211346"},"children":[{"type":"text","value":"version"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"\"3.9\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-211346"},"children":[{"type":"text","value":"services"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-211346"},"children":[{"type":"text","value":"app"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-326375"},"children":[{"type":"text","value":"# 이미지 이름 (마음대로 설정해도 됩니다)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-211346"},"children":[{"type":"text","value":"build"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-326375"},"children":[{"type":"text","value":"# Dockerfile이 있는 경로를 넣어주기\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-211346"},"children":[{"type":"text","value":"ports"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"\"3000:3000\""}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-326375"},"children":[{"type":"text","value":"# docker CLI의 \"-p 3000:3000\" 과 같은 표현"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"프로젝트 루트 디렉토리에 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"docker-compose.yml"}]},{"type":"text","value":" 파일을 만들어 주고 터미널에 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"docker compose up"}]},{"type":"text","value":" 을 입력하면 정상적으로 컨테이너가 생성되고, 로컬호스트로 접근이 가능해집니다."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"docker compose CLI는 이제 docker CLI에서 제공됩니다. "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"docker-compose CMD"}]},{"type":"text","value":" 대신 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"docker compose CMD"}]},{"type":"text","value":" 를 사용해주세요."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"그리고 여러 개의 컨테이너를 한 꺼번에 띄우고 싶다면 이런식으로 하면 됩니다."}]},{"type":"element","tag":"code","props":{"className":["language-yaml"],"code":"version: \"3.9\"\n\nservices:\n  app1:\n    build: .\n    ports:\n      - \"3000:3000\"\n\n  app2:\n    build: .\n    ports:\n      - \"3001:3000\"\n\n  app3:\n    build: .\n    ports:\n      - \"3002:3000\"\n\n  app4:\n    build: .\n    ports:\n      - \"3003:3000\"\n","filename":"docker-compose.yml","language":"yaml","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-211346"},"children":[{"type":"text","value":"version"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"\"3.9\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-211346"},"children":[{"type":"text","value":"services"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-211346"},"children":[{"type":"text","value":"app1"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-211346"},"children":[{"type":"text","value":"build"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":".\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-211346"},"children":[{"type":"text","value":"ports"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"\"3000:3000\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-211346"},"children":[{"type":"text","value":"app2"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-211346"},"children":[{"type":"text","value":"build"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":".\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-211346"},"children":[{"type":"text","value":"ports"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"\"3001:3000\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-211346"},"children":[{"type":"text","value":"app3"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-211346"},"children":[{"type":"text","value":"build"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":".\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-211346"},"children":[{"type":"text","value":"ports"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"\"3002:3000\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-211346"},"children":[{"type":"text","value":"app4"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-211346"},"children":[{"type":"text","value":"build"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":".\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-211346"},"children":[{"type":"text","value":"ports"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"\"3003:3000\""}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"이러고 3000 ~ 3003 포트까지 들어가보면 잘 접속됩니다."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"image","src":"https://user-images.githubusercontent.com/20244536/121302145-359e9600-c934-11eb-8a32-2aa5c323945a.png"},"children":[]},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"이미지가 잘 안보이는데, 아무튼 4개 앱이 각자 다른 포트로 열렸다는 뜻"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"도커 컴포즈는 일반 도커 명령어와 다르게, 터미널에서 작업을 종료하면 그대로 컨테이너들이 모두 비활성화됩니다. 백그라운드에서도 계속 실행시키고 싶다면 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"docker compose up -d"}]},{"type":"text","value":" 명령어를 사용해주세요."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"그리고 백그라운드에서 실행된 컨테이너들을 한 번에 지우려면 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"docker compose down"}]},{"type":"text","value":"을 하면 됩니다. (다른 디렉토리에서 하면 당연히 안됩니다..)"}]},{"type":"element","tag":"h2","props":{"id":"프로젝트-구조-개선하기"},"children":[{"type":"text","value":"프로젝트 구조 개선하기"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"여기까지 간단하게 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Docker"}]},{"type":"text","value":" 에 대해 살펴봤습니다. 근데 사실 지금 상태로 앱을 개발하고, 배포하기엔 몇 가지 문제가 있습니다."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"첫 번째는 "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"핫 리로딩"}]},{"type":"text","value":"입니다. 도커 컨테이너로 개발을 하는 경우, 코드를 수정할 때 마다 개발 서버가 다시 시작되지 않습니다. 이유는 우리가 수정하는 코드는 로컬 컴퓨터의 코드지, 컨테이너 안의 코드가 아니기 때문입니다."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"두 번째는 "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"배포"}]},{"type":"text","value":"입니다. 일반적으로 배포용 앱은 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"webpack"}]},{"type":"text","value":" 같은 번들링 도구를 이용해 코드를 변형하거나 압축시키는 작업을 하게 됩니다. 그렇게 하기 위해서는 배포용 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Dockerfile"}]},{"type":"text","value":" 이 필요합니다."}]},{"type":"element","tag":"h3","props":{"id":"핫-리로딩-개선하기"},"children":[{"type":"text","value":"핫 리로딩 개선하기"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"해결 방법은 간단합니다. 내 로컬 컴퓨터와 컨테이너의 "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"저장 공간"}]},{"type":"text","value":"을 공유하면 됩니다. 로컬 코드를 수정하면 바로 컨테이너 안의 코드도 같이 수정이 되는거죠."}]},{"type":"element","tag":"code","props":{"className":["language-yaml"],"code":"version: \"3.9\"\n\nservices:\n  app:\n    build: .\n    ports:\n      - \"3000:3000\"\n    volumes:\n      - \".:/usr/src/api\" # Dockerfile의 WORKDIR와 맞추기\n      - \"/usr/src/api/node_modules\" # 핫 리로드 성능 개선\n","filename":"docker-compose.yml","language":"yaml","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-211346"},"children":[{"type":"text","value":"version"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"\"3.9\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-211346"},"children":[{"type":"text","value":"services"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-211346"},"children":[{"type":"text","value":"app"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-211346"},"children":[{"type":"text","value":"build"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":".\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-211346"},"children":[{"type":"text","value":"ports"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"\"3000:3000\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-211346"},"children":[{"type":"text","value":"volumes"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"\".:/usr/src/api\""}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-326375"},"children":[{"type":"text","value":"# Dockerfile의 WORKDIR와 맞추기\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"\"/usr/src/api/node_modules\""}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-326375"},"children":[{"type":"text","value":"# 핫 리로드 성능 개선"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"이렇게 하고 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"docker compose up --build"}]},{"type":"text","value":" 명령어로 새로 빌드하면서 컨테이너를 띄워주고, 코드를 수정하면 바로 서버가 다시 시작하게 됩니다."}]},{"type":"element","tag":"h3","props":{"id":"개발용-배포용-이미지-분리하기"},"children":[{"type":"text","value":"개발용, 배포용 이미지 분리하기"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"일단 기존 도커파일은 개발용이었으니 파일 이름을 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Dockerfile.dev"}]},{"type":"text","value":" 로 변경해주고, 배포용 파일인 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Dockerfile"}]},{"type":"text","value":" 을 새로 만들어주세요."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"배포용 도커 파일은 이렇게 작성합니다."}]},{"type":"element","tag":"code","props":{"className":["language-dockerfile"],"code":"FROM node:14-slim\n\nWORKDIR /usr/src/app\n\nCOPY package.json .\nCOPY yarn.lock .\n\nRUN yarn\n\nCOPY . .\n\nRUN yarn build # 빌드하는 부분 추가\n\nEXPOSE 3000\n\nCMD [ \"yarn\", \"start\" ] # `yarn dev`에서 `yarn start`로 변경\n","filename":"Dockerfile","language":"dockerfile","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"FROM"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" node:14-slim\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"WORKDIR"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" /usr/src/app\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"COPY"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" package.json .\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"COPY"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" yarn.lock .\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"RUN"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" yarn\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"COPY"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" . .\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"RUN"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" yarn build # 빌드하는 부분 추가\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"EXPOSE"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" 3000\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"CMD"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" [ "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"\"yarn\""}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"\"start\""}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" ] # `yarn dev`에서 `yarn start`로 변경"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"그리고 기존 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"docker-compose.yml"}]},{"type":"text","value":" 도 이름을 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"docker-compose.dev.yml"}]},{"type":"text","value":" 로 바꾸고, 새로운 컴포즈 파일을 만들고 아래 내용을 작성합니다."}]},{"type":"element","tag":"code","props":{"className":["language-yaml"],"code":"version: \"3.9\"\n\nservices:\n  app:\n    build: .\n    ports:\n      - \"80:3000\"\n","filename":"docker-compose.yml","language":"yaml","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-211346"},"children":[{"type":"text","value":"version"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"\"3.9\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-211346"},"children":[{"type":"text","value":"services"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-211346"},"children":[{"type":"text","value":"app"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-211346"},"children":[{"type":"text","value":"build"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":".\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-211346"},"children":[{"type":"text","value":"ports"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"\"80:3000\""}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"물론 배포용 앱을 웹서버 없이 그냥 올리는 사람은 없을겁니다. "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nginx"}]},{"type":"text","value":" 같은 웹서버로 프록시를 해줘야 하지만, 여기서 다루면 또 내용이 비대해지기 때문에, 일단은 대충 이렇게 한다는 걸 알아두시면 되겠습니다."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"개발용인 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Dockerifle.dev"}]},{"type":"text","value":" 와 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"docker-compose.dev.yml"}]},{"type":"text","value":" 은 이렇게 사용하면 됩니다."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"도커파일은 똑같고, 컴포즈 파일은 조금 수정이 필요합니다."}]},{"type":"element","tag":"code","props":{"className":["language-yaml"],"code":"version: \"3.9\"\n\nservices:\n  app:\n    build:\n      context: .\n      dockerfile: Dockerfile.dev\n    ports:\n      - \"3000:3000\"\n    volumes:\n      - \".:/usr/src/app\"\n      - \"/usr/src/app/node_modules\"\n","filename":"docker-compose.dev.yml","language":"yaml","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-211346"},"children":[{"type":"text","value":"version"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"\"3.9\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-211346"},"children":[{"type":"text","value":"services"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-211346"},"children":[{"type":"text","value":"app"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-211346"},"children":[{"type":"text","value":"build"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-211346"},"children":[{"type":"text","value":"context"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":".\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-211346"},"children":[{"type":"text","value":"dockerfile"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"Dockerfile.dev\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-211346"},"children":[{"type":"text","value":"ports"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"\"3000:3000\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-211346"},"children":[{"type":"text","value":"volumes"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"\".:/usr/src/app\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"\"/usr/src/app/node_modules\""}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"build"}]},{"type":"text","value":" 부분이 조금 바뀌는데, 개발 때는 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Dockerfile.dev"}]},{"type":"text","value":" 을 읽도록 바꿔주었습니다."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"CLI"}]},{"type":"text","value":"로 실행할 땐 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-f"}]},{"type":"text","value":" 플래그를 이용하면 됩니다."}]},{"type":"element","tag":"code","props":{"className":["language-bash"],"code":"$ docker compose -f docker-compose.dev.yml up --build\n","filename":"shell","language":"bash","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-806137"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"docker"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"compose"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"-f"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"docker-compose.dev.yml"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"up"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"--build"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"참고"},"children":[{"type":"text","value":"참고"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://nodejs.org/ko/docs/guides/nodejs-docker-webapp/","rel":["nofollow"]},"children":[{"type":"text","value":"Node.js 웹 앱의 도커라이징 - nodejs.org"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://docs.docker.com/compose/compose-file/","rel":["nofollow"]},"children":[{"type":"text","value":"Compose file - docs.docker.com"}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-806137{color:#B392F0;}\n.ct-767297{color:#E1E4E8;}\n.ct-244866{color:#9ECBFF;}\n.ct-533739{color:#79B8FF;}\n.ct-326375{color:#6A737D;}\n.ct-857441{color:#F97583;}\n.ct-657843{color:#FFAB70;}\n.ct-211346{color:#85E89D;}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"nodejs-서버-만들기","depth":2,"text":"Node.js 서버 만들기"},{"id":"dockerfile","depth":2,"text":"Dockerfile"},{"id":"docker-compose","depth":2,"text":"Docker Compose"},{"id":"프로젝트-구조-개선하기","depth":2,"text":"프로젝트 구조 개선하기","children":[{"id":"핫-리로딩-개선하기","depth":3,"text":"핫 리로딩 개선하기"},{"id":"개발용-배포용-이미지-분리하기","depth":3,"text":"개발용, 배포용 이미지 분리하기"},{"id":"참고","depth":3,"text":"참고"}]}]}},"_type":"markdown","_id":"content:super-easy-docker.md","_source":"content","_file":"super-easy-docker.md","_extension":"md"},"hash":"5znF817xY9"}